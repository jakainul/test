<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Enhanced Savings Growth Trends - Example Visualization</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f9fafb;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            padding: 24px;
        }
        .header {
            color: #059669;
            margin-bottom: 16px;
            font-size: 24px;
            font-weight: 600;
        }
        .total-savings {
            background-color: #f0fdf4;
            border: 1px solid #bbf7d0;
            border-radius: 8px;
            padding: 16px;
            margin-bottom: 20px;
            text-align: center;
        }
        .total-label {
            font-size: 14px;
            color: #059669;
            margin-bottom: 4px;
        }
        .total-amount {
            font-size: 24px;
            font-weight: bold;
            color: #065f46;
        }
        .chart-container {
            position: relative;
            height: 500px;
            margin: 20px 0;
        }
        .projection-info {
            background-color: #fef3c7;
            border: 1px solid #fcd34d;
            border-radius: 8px;
            padding: 16px;
            margin-top: 20px;
        }
        .projection-info h4 {
            margin: 0 0 12px 0;
            color: #92400e;
        }
        .projection-info p {
            margin: 4px 0;
            color: #78350f;
            font-size: 14px;
        }
        .legend-custom {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin: 20px 0;
            padding: 16px;
            background-color: #f8fafc;
            border-radius: 8px;
        }
        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .legend-line {
            width: 30px;
            height: 3px;
            border-radius: 2px;
        }
        .legend-line.solid {
            background: linear-gradient(to right, currentColor, currentColor);
        }
        .legend-line.dashed {
            background: repeating-linear-gradient(
                to right,
                currentColor 0,
                currentColor 6px,
                transparent 6px,
                transparent 12px
            );
        }
        .legend-text {
            font-size: 14px;
            font-weight: 500;
        }
    </style>
</head>
<body>
    <div class="container">
        <h3 class="header">ðŸ’Ž Enhanced Savings Growth Trends with Future Projections</h3>
        
        <div class="total-savings">
            <div class="total-label">Current Total Savings</div>
            <div class="total-amount">â‚¬45,750.00</div>
        </div>

        <div class="legend-custom">
            <div class="legend-item">
                <div class="legend-line solid" style="color: rgb(59, 130, 246);"></div>
                <span class="legend-text">ETFs (Historical)</span>
            </div>
            <div class="legend-item">
                <div class="legend-line dashed" style="color: rgb(30, 64, 175);"></div>
                <span class="legend-text">ETFs 5% Growth</span>
            </div>
            <div class="legend-item">
                <div class="legend-line dashed" style="color: rgb(59, 130, 246);"></div>
                <span class="legend-text">ETFs 7% Growth</span>
            </div>
            <div class="legend-item">
                <div class="legend-line dashed" style="color: rgb(147, 197, 253);"></div>
                <span class="legend-text">ETFs 10% Growth</span>
            </div>
            <div class="legend-item">
                <div class="legend-line solid" style="color: rgb(239, 68, 68);"></div>
                <span class="legend-text">Stocks (Historical)</span>
            </div>
            <div class="legend-item">
                <div class="legend-line dashed" style="color: rgb(153, 27, 27);"></div>
                <span class="legend-text">Stocks 5% Growth</span>
            </div>
            <div class="legend-item">
                <div class="legend-line dashed" style="color: rgb(239, 68, 68);"></div>
                <span class="legend-text">Stocks 7% Growth</span>
            </div>
            <div class="legend-item">
                <div class="legend-line dashed" style="color: rgb(252, 165, 165);"></div>
                <span class="legend-text">Stocks 10% Growth</span>
            </div>
            <div class="legend-item">
                <div class="legend-line solid" style="color: rgb(5, 150, 105);"></div>
                <span class="legend-text">Savings Account</span>
            </div>
        </div>

        <div class="chart-container">
            <canvas id="savingsChart"></canvas>
        </div>

        <div class="projection-info">
            <h4>ðŸ“Š Future Projections Information</h4>
            <p><strong>Timeline:</strong> 20-year projection from current date (2025-2045)</p>
            <p><strong>Growth Rates:</strong> Conservative (5%), Moderate (7%), Aggressive (10%) annual returns</p>
            <p><strong>Assumptions:</strong> Projections based on current portfolio values with compound annual growth</p>
            <p><strong>Note:</strong> Historical data shown as solid lines, future projections as dashed lines</p>
        </div>
    </div>

    <script>
        // Sample data representing current savings history
        const currentDate = new Date();
        const startDate = new Date(2023, 0); // January 2023
        
        // Generate historical data (2 years)
        const historicalMonths = [];
        const etfHistorical = [];
        const stockHistorical = [];
        const savingsHistorical = [];
        
        let currentETF = 0;
        let currentStock = 0;
        let currentSavings = 0;
        
        for (let i = 0; i < 24; i++) {
            const date = new Date(startDate);
            date.setMonth(date.getMonth() + i);
            historicalMonths.push(date.toLocaleDateString('en-US', { month: 'short', year: 'numeric' }));
            
            // Simulate historical growth with some randomness
            currentETF += Math.random() * 800 + 600; // â‚¬600-1400 per month
            currentStock += Math.random() * 600 + 400; // â‚¬400-1000 per month  
            currentSavings += Math.random() * 300 + 200; // â‚¬200-500 per month
            
            etfHistorical.push(Math.round(currentETF));
            stockHistorical.push(Math.round(currentStock));
            savingsHistorical.push(Math.round(currentSavings));
        }
        
        // Generate future projection data (20 years = 240 months)
        const allMonths = [...historicalMonths];
        const projectionMonths = [];
        
        for (let i = 0; i < 240; i++) {
            const date = new Date(currentDate);
            date.setMonth(date.getMonth() + i + 1);
            const monthLabel = date.toLocaleDateString('en-US', { month: 'short', year: 'numeric' });
            allMonths.push(monthLabel);
            projectionMonths.push(monthLabel);
        }
        
        // Calculate projections
        const calculateProjection = (startValue, annualRate, months) => {
            const monthlyRate = Math.pow(1 + annualRate, 1/12) - 1;
            const projection = [];
            let value = startValue;
            
            for (let i = 0; i < months; i++) {
                value *= (1 + monthlyRate);
                projection.push(Math.round(value));
            }
            return projection;
        };
        
        const finalETF = etfHistorical[etfHistorical.length - 1];
        const finalStock = stockHistorical[stockHistorical.length - 1];
        
        const etfProjection5 = calculateProjection(finalETF, 0.05, 240);
        const etfProjection7 = calculateProjection(finalETF, 0.07, 240);
        const etfProjection10 = calculateProjection(finalETF, 0.10, 240);
        
        const stockProjection5 = calculateProjection(finalStock, 0.05, 240);
        const stockProjection7 = calculateProjection(finalStock, 0.07, 240);
        const stockProjection10 = calculateProjection(finalStock, 0.10, 240);
        
        // Extend savings account with minimal growth (1%)
        const savingsProjection = calculateProjection(savingsHistorical[savingsHistorical.length - 1], 0.01, 240);
        
        // Chart configuration
        const ctx = document.getElementById('savingsChart').getContext('2d');
        
        const chart = new Chart(ctx, {
            type: 'line',
            data: {
                labels: allMonths,
                datasets: [
                    // Historical data (solid lines)
                    {
                        label: 'ETFs (Historical)',
                        data: [...etfHistorical, ...new Array(240).fill(null)],
                        borderColor: 'rgb(59, 130, 246)',
                        backgroundColor: 'rgba(59, 130, 246, 0.1)',
                        borderWidth: 3,
                        fill: false,
                        tension: 0.1,
                        pointRadius: 2,
                        pointHoverRadius: 5,
                    },
                    {
                        label: 'Stocks (Historical)',
                        data: [...stockHistorical, ...new Array(240).fill(null)],
                        borderColor: 'rgb(239, 68, 68)',
                        backgroundColor: 'rgba(239, 68, 68, 0.1)',
                        borderWidth: 3,
                        fill: false,
                        tension: 0.1,
                        pointRadius: 2,
                        pointHoverRadius: 5,
                    },
                    {
                        label: 'Savings Account',
                        data: [...savingsHistorical, ...savingsProjection],
                        borderColor: 'rgb(5, 150, 105)',
                        backgroundColor: 'rgba(5, 150, 105, 0.1)',
                        borderWidth: 3,
                        fill: false,
                        tension: 0.1,
                        pointRadius: 1,
                        pointHoverRadius: 4,
                    },
                    // ETF Projections (dashed lines)
                    {
                        label: 'ETFs 5% Growth',
                        data: [...new Array(24).fill(null), ...etfProjection5],
                        borderColor: 'rgb(30, 64, 175)',
                        backgroundColor: 'rgba(30, 64, 175, 0.05)',
                        borderWidth: 2,
                        borderDash: [8, 4],
                        fill: false,
                        tension: 0.1,
                        pointRadius: 0,
                        pointHoverRadius: 4,
                    },
                    {
                        label: 'ETFs 7% Growth',
                        data: [...new Array(24).fill(null), ...etfProjection7],
                        borderColor: 'rgb(59, 130, 246)',
                        backgroundColor: 'rgba(59, 130, 246, 0.05)',
                        borderWidth: 2,
                        borderDash: [8, 4],
                        fill: false,
                        tension: 0.1,
                        pointRadius: 0,
                        pointHoverRadius: 4,
                    },
                    {
                        label: 'ETFs 10% Growth',
                        data: [...new Array(24).fill(null), ...etfProjection10],
                        borderColor: 'rgb(147, 197, 253)',
                        backgroundColor: 'rgba(147, 197, 253, 0.05)',
                        borderWidth: 2,
                        borderDash: [8, 4],
                        fill: false,
                        tension: 0.1,
                        pointRadius: 0,
                        pointHoverRadius: 4,
                    },
                    // Stock Projections (dashed lines)
                    {
                        label: 'Stocks 5% Growth',
                        data: [...new Array(24).fill(null), ...stockProjection5],
                        borderColor: 'rgb(153, 27, 27)',
                        backgroundColor: 'rgba(153, 27, 27, 0.05)',
                        borderWidth: 2,
                        borderDash: [8, 4],
                        fill: false,
                        tension: 0.1,
                        pointRadius: 0,
                        pointHoverRadius: 4,
                    },
                    {
                        label: 'Stocks 7% Growth',
                        data: [...new Array(24).fill(null), ...stockProjection7],
                        borderColor: 'rgb(239, 68, 68)',
                        backgroundColor: 'rgba(239, 68, 68, 0.05)',
                        borderWidth: 2,
                        borderDash: [8, 4],
                        fill: false,
                        tension: 0.1,
                        pointRadius: 0,
                        pointHoverRadius: 4,
                    },
                    {
                        label: 'Stocks 10% Growth',
                        data: [...new Array(24).fill(null), ...stockProjection10],
                        borderColor: 'rgb(252, 165, 165)',
                        backgroundColor: 'rgba(252, 165, 165, 0.05)',
                        borderWidth: 2,
                        borderDash: [8, 4],
                        fill: false,
                        tension: 0.1,
                        pointRadius: 0,
                        pointHoverRadius: 4,
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        display: false, // Using custom legend
                    },
                    title: {
                        display: false,
                    },
                    tooltip: {
                        mode: 'index',
                        intersect: false,
                        callbacks: {
                            label: function(context) {
                                const value = context.parsed.y;
                                if (value === null) return null;
                                
                                const formatter = new Intl.NumberFormat('en-EU', {
                                    style: 'currency',
                                    currency: 'EUR',
                                    minimumFractionDigits: 0,
                                    maximumFractionDigits: 0,
                                });
                                
                                return `${context.dataset.label}: ${formatter.format(value)}`;
                            }
                        }
                    }
                },
                scales: {
                    x: {
                        display: true,
                        title: {
                            display: true,
                            text: 'Timeline (20 Years)',
                            font: {
                                size: 14,
                                weight: 'bold'
                            }
                        },
                        ticks: {
                            maxTicksLimit: 15,
                            callback: function(value, index) {
                                // Show every 2 years
                                if (index % 24 === 0) {
                                    return this.getLabelForValue(value);
                                }
                                return '';
                            }
                        }
                    },
                    y: {
                        display: true,
                        title: {
                            display: true,
                            text: 'Cumulative Value (â‚¬)',
                            font: {
                                size: 14,
                                weight: 'bold'
                            }
                        },
                        ticks: {
                            callback: function(value) {
                                return new Intl.NumberFormat('en-EU', {
                                    style: 'currency',
                                    currency: 'EUR',
                                    minimumFractionDigits: 0,
                                    maximumFractionDigits: 0,
                                }).format(value);
                            }
                        }
                    }
                },
                interaction: {
                    mode: 'index',
                    intersect: false,
                },
                elements: {
                    point: {
                        hoverRadius: 6,
                    }
                }
            }
        });

        // Add a vertical line to separate historical from projected data
        const originalDraw = chart.draw;
        chart.draw = function() {
            originalDraw.call(this);
            
            const ctx = this.ctx;
            const chartArea = this.chartArea;
            const meta = this.getDatasetMeta(0);
            
            // Find the x position for the separator (end of historical data)
            if (meta.data.length > 24) {
                const separatorX = meta.data[23].x;
                
                ctx.save();
                ctx.strokeStyle = 'rgba(0, 0, 0, 0.3)';
                ctx.lineWidth = 2;
                ctx.setLineDash([5, 5]);
                ctx.beginPath();
                ctx.moveTo(separatorX, chartArea.top);
                ctx.lineTo(separatorX, chartArea.bottom);
                ctx.stroke();
                ctx.restore();
                
                // Add label
                ctx.save();
                ctx.fillStyle = 'rgba(0, 0, 0, 0.6)';
                ctx.font = '12px Arial';
                ctx.textAlign = 'center';
                ctx.fillText('Projections â†’', separatorX + 50, chartArea.top - 10);
                ctx.restore();
            }
        };
    </script>
</body>
</html>